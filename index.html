<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Screenshot Time</title>
  <!-- Bulma CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css" />
  <!-- Bulma Timeline CSS -->
  <link rel="stylesheet" href="css/bulma-timeline.min.css" />
  <!-- Slick CSS -->
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <!-- Main CSS -->
  <link rel="stylesheet" href="css/style.css" />
</head>

<body class="dark-theme">
  <div class="box is-narrow-desktop">
    <div class="nav">
      <div class="nav__inner">
        <h1 class="mr-4 title">
          <a href="#screenshots" class="hover-link">
            Screenshot Time
          </a>
        </h1>
        <div class="buttons are-small">
          <button id="themeToggle" class="button is-info is-outlined is-rounded">Перемикання теми</button>

        </div>
      </div>
      <div class="has-text-centered">
        <div class="mb-6 is-flex is-flex-direction-column is-align-items-center">
          <button id="startButton" class=" mt-3 button is-info is-outlined is-rounded">start screenshot</button>

          <!-- <a id=" startButton" class="button-link mt-3">start screenshot</a> -->
          <video id="video" class="video" autoplay></video>
          <div id="screenshots"></div>
          <button id="stopButton" class="button is-danger" style="display: none;">Закрити доступ</button>
        </div>
        <div class="time">
          <label for="interval">Введіть інтервал (в хвилинах)
            <input class="ml-5 " type="number" id="interval" placeholder="Хвилини" min="1" />
          </label>
        </div>
      </div>
    </div>
  </div>
  </div>
  <div>
  </div>


  <button id="signInButton">Створити обліковий запис / Увійти</button>
  <button id="signOutButton">Вийти</button>
  <div id="message">
    <p>Ви ввійшли в систему як <span id="userName"> <span id="userEmail">з помічю електроной почти email </span> </span>
    </p>
  </div>


  <!-- <script src="script.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</body>



<script src="https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.min.js"></script>
<script src="js/script.js"></script>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
  import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";

  // Ваші конфігурації Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyAcVk5A6uypL5YcaRQpPQblTkYkeovX9oQ",
    authDomain: "screenshot-time-d3455.firebaseapp.com",
    projectId: "screenshot-time-d3455",
    storageBucket: "screenshot-time-d3455.appspot.com",
    messagingSenderId: "482205183848",
    appId: "1:482205183848:web:ea2935d5e02afe8e7e30dd"
  };

  // Ініціалізація Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth();
  const provider = new GoogleAuthProvider();

  const signInButton = document.getElementById("signInButton");
  const signOutButton = document.getElementById("signOutButton");
  const message = document.getElementById("message");
  const userName = document.getElementById("userName");
  const userEmail = document.getElementById("userEmail");

  // Сховати кнопку виходу та повідомлення спочатку
  signOutButton.style.display = "none";
  message.style.display = "none";
  const userSignIn = async => {
    signInWithPopup(auth, provider)
      .then((result) => {
        const user = result.user
        console.log(user);
      }).catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message
      })
  }

  const userSignOut = async () => {
    signOut(auth).then(() => {
      alert("ви вийшли з системи успішно!")
    }).catch((error) => { })
  }

  onAuthStateChanged(auth, (user) => {
    if (user) {
      signOutButton.style.display = "block";
      message.style.display = "block";
      userName.innerHTML = user.displayName;
      userEmail.innerHTML = user.email
    } else {
      signOutButton.style.display = "none";
      message.style.display = "none";

    }
  })

  signInButton.addEventListener("click", userSignIn);
  signOutButton.addEventListener('click', userSignOut);

</script>



</html>